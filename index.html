<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DangleData - NHL Player Line Tracker</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header-row">
            <h1>üèí DangleData</h1>
            <button class="dark-mode-toggle" onclick="window.proptrack.toggleDarkMode()">üåô Dark Mode</button>
        </div>
        <p class="subtitle">NHL Player Prop Analytics & Betting Line Tracker</p>
        
        <!-- API Status -->
        <div id="apiStatus" class="api-status">
            Loading data from cache...
        </div>
        
        <!-- Search & Filters -->
        <div class="controls">
            <input type="text" id="searchPlayer" placeholder="Search players..." oninput="window.proptrack.filterPlayers()">
            <select id="gameFilter" onchange="window.proptrack.filterPlayers()" style="padding: 10px; font-size: 16px; border: 2px solid var(--input-border); border-radius: 8px; background: var(--container-bg); color: var(--text-primary); min-width: 250px;">
                <option value="">All Games</option>
            </select>
        </div>
        
        <!-- Checkboxes -->
        <div class="controls">
            <div class="control-group">
                <input type="checkbox" id="hideNoLines" onchange="window.proptrack.filterPlayers()" checked>
                <label for="hideNoLines">Hide players without betting lines</label>
            </div>
            
            <div class="control-group">
                <input type="checkbox" id="hideStartedGames" onchange="window.proptrack.filterPlayers()">
                <label for="hideStartedGames">Hide games that have started</label>
            </div>
        </div>
        
        <!-- Stat Selection -->
        <div style="background: var(--card-bg); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; color: var(--text-primary);">Select Stat:</label>
            <div class="stat-buttons">
                <button class="stat-button active" onclick="window.proptrack.selectStat('points')">Points</button>
                <button class="stat-button" onclick="window.proptrack.selectStat('goals')">Goals</button>
                <button class="stat-button" onclick="window.proptrack.selectStat('assists')">Assists</button>
                <button class="stat-button" onclick="window.proptrack.selectStat('shots')">Shots</button>
                <button class="stat-button" onclick="window.proptrack.selectStat('saves')">Goalie Saves</button>
                <button class="stat-button" onclick="window.proptrack.selectStat('team_totals')">Team Totals</button>
            </div>
        </div>
        
        <!-- Line Filter -->
        <div id="lineFilterSection" style="background: var(--card-bg); padding: 20px; border-radius: 10px; margin-bottom: 20px; display: none;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; color: var(--text-primary);">Filter by Line:</label>
            <div class="line-filter-buttons" id="lineFilterButtons">
                <!-- Populated dynamically -->
            </div>
        </div>
        
        <!-- Players Grid -->
        <div id="playersContainer" class="players-grid">
            <div class="loading">Loading all players from cache...</div>
        </div>
        
        <!-- Watchlist -->
        <div id="watchlistContainer" class="watchlist-container">
            <div class="watchlist-header" onclick="window.proptrack.toggleWatchlist()">
                <div class="watchlist-title">
                    ‚≠ê Watchlist <span id="watchlistCount">(0)</span>
                </div>
                <div class="watchlist-toggle">‚ñº</div>
            </div>
            <div class="watchlist-content">
                <div id="watchlistItems"></div>
                <div id="parlayCalculator"></div>
            </div>
        </div>
    </div>
    
    <!-- Game Log Modal -->
    <div id="gameLogModal" class="game-log-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="window.proptrack.closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Load App as ES Module -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
